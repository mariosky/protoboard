{% extends "activitytree/base.html" %}


{% block content %}
    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h2>Aprende como a tí te gusta.</h2>
        <p> <b>Inscríbete a uno de los cursos  o crea el tuyo.</b>    ¿Sin mucho tiempo? Visita algún <b>bit de aprendizaje</b>: prácticas, ejercicios o videos sobre algún tema. </p>
        <p><a class="btn btn-primary" href="/login/?next=/welcome" role="button">Ingresa o Regístrate</a></p>
    </div>
    </div>

    <div class="container">
      <!-- Example row of columns -->



      <div class="row">


        <div class="col-md-7 col-sm-7">
            <ul class="nav nav-tabs course-listing-nav">
          <li role="presentation" class="active"><a href="#"> Nuevos Cursos</a></li>
          <li role="presentation"><a href="/courses"> Ver todos </a></li>
          <li role="presentation"><a href="#">Crear tu curso</a></li>
        </ul>


            {% for c in courses %}
        <div class="course-listing">
            <div class="row">

            <div class="col-md-3 col-xs-6">

                <a href="#">
                    <img class="img-rounded img-responsive" src="{{ c.root.image }}" alt="...">


                </a>

            </div>
            <div class="clearfix visible-xs-block"></div>
            <div class="col-md-9">

                <h4> {{c.root.name}} </h4>

                {{ c.short_description|safe }}

<ul class="course-listing-bar">
  <li> <i class="fa fa-pencil"></i>   <a href="#"> {{ c.root.authorlearningactivity_set.all.0.user.get_full_name }} </a></li>
  <li><i class="fa fa-university"></i> Principiante </li>
  <li> <i class="fa fa-clock-o"></i> 4 horas </li>

</ul>

{% if user.is_authenticated %}
                       <a class="btn btn-default btn-sm pull-right" href="/{{c.root.id }}{{c.root.uri }}?nav=continue" role="button"> Ir al curso &raquo;</a>
                     {% else %}
                        <a class="btn btn-default btn-sm pull-right" href="/{{c.root.id }}{{c.root.uri }}" role="button">Regístrate &raquo;</a>
                {% endif %}




            </div>

            </div>
        </div>
         {% endfor %}
        </div>



      <div id='activities' class="col-md-5 col-sm-5">
       <ul class="nav nav-tabs">
          <li role="presentation" class="active"><a href="#">Small Bits</a></li>
          <li role="presentation"><a href="/courses"> Ver todos </a></li>
          <li role="presentation"><a href="#">Crear tus Bits</a></li>
        </ul>

      </div>


      </div>

      <hr>

      <footer>
        <p>
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
           </a>
            <br />El contenido de los cursos es: <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a> y
            otras licencias abiertas.</p>
      </footer>
    </div> <!-- /container -->
{% endblock content %}



{% block scripts %}

  <script type="text/javascript" charset="utf-8">

         $(document).ready(function() {







        $.get( '/get_activities',  function (data) {

            Mustache.tags = ['[[', ']]'];
            var activities_template = $('#activities_template').html();
            Mustache.parse(activities_template);
            var obj = jQuery.parseJSON( data );


            $.each(obj, function( index, value ) {

                rendered = Mustache.render(activities_template, {
                    title: value.title,
                    uri: value._id,
                    icon:value.icon,
                    description: value.description,
                    lang:value.lang,
                    level:value.level,
                    type:value.type,
                    tags:value.tags});

                $("#activities").append(rendered);

            });





            });

 });

</script>

<script id="activities_template" type="x-tmpl-mustache">
         <div class="media">
             <div class="media-body">

               <a class="media-heading" href="[[uri]]" role="button"><i class="fa fa-[[icon]]"></i> [[title]] &raquo;</a>
               <p>

                      [[description]]

               </p>

            <p>
            {% comment %}
              [[#type]]
              <span class="label label-info"><a href="/search/?type=[[type]]" style="color:#FFFFFF">[[type]]</a></span>
              [[/type]]
              [[^type]]
              [[/type]]
            {% endcomment %}
              [[#lang]]
              <span class="label label-success"><a href="/search/?lang=[[lang]]" style="color:#FFFFFF">[[lang]]</a></span>
              [[/lang]]
              [[^lang]]
              [[/lang]]

              [[#level]]
              <span class="label label-default"><a href="/search/?level=[[level]]" style="color:#FFFFFF">[[level]]</a></span>
              [[/level]]
              [[^level]]
              [[/level]]

              [[#tags]]
              [[#.]]
              <span class="label label-info"><a href="/search/?tag=[[.]]" style="color:#FFFFFF">[[.]]</a></span>
              [[/.]]
              [[^.]]
              [[/.]]
              [[/tags]]
            </p>

            </div>
        </div>

</script>



{% endblock scripts %}